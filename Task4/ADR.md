### <a name="_b7urdng99y53"></a>**Название задачи:** Передача ставок в кол-центр

### <a name="_hjk0fkfyohdk"></a>**Автор:** Ершов Павел

### <a name="_uanumrh8zrui"></a>**Дата:** 17.05.2025

### <a name="_3bfxc9a45514"></a>**Функциональные требования**

Опишите здесь верхнеуровневые Use Cases. Их нужно оформить в виде таблицы с пошаговым описанием:

| **№** | **Действующие лица или системы**  | **Use Case**               | **Описание**                                                                            |
|:-----:|:----------------------------------|:---------------------------|:----------------------------------------------------------------------------------------|
|   1   | Сотрудник кол-центра              | Получить актуальные ставки | Сотрудник может видеть актуальные ставки депозитов и консультировать клиентов           |
|   2   | Сотрудник партнёрского кол-центра | Получить актуальные ставки | Партнёрский кол-центр получает ставки в виде файла через SFTP для консультации клиентов |
|   3   | Система кол-центра                | Обновить ставки            | Система кол-центра получает новые ставки через внутренний API банка                     |
|   4   | Система депозитов                 | Передать ставки            | Система обновляет ставки и передаёт их в кол-центры                                     |

### <a name="_u8xz25hbrgql"></a>**Нефункциональные требования**

Опишите здесь нефункциональные требования и архитектурно-значимые требования.

| **№** | **Требование**                                                  |
|:-----:|:----------------------------------------------------------------|
|   1   | Защищённая передача данных между deposit-service и кол-центрами |
|   2   | Автоматическая передача данных при обновлении ставок            |
|   3   | Логирование всех транзакций по передаче ставок                  |
|   4   | Гарантия доступности данных не менее 99,9%                      |

### <a name="_qmphm5d6rvi3"></a>**Решение**

Для обеспечения доступа к актуальным ставкам предложено:
В deposit-service разрабатывать модуль передачи ставок. Этот модуль будет формировать актуальные ставки и отправлять их:
* В систему кол-центра через внутренний API.
* В партнёрский кол-центр через SFTP-файлы.
Для хранения ставок создать таблицу rates в deposit-service для хранения (client-id 1-* rateId)

### <a name="_bjrr7veeh80c"></a>**Альтернативы**

Альтернативы:
* Передача ставок через REST API во внешнюю систему (не поддерживается у партнёра).
* Использование ручной выгрузки Excel-файлов (слишком медленно и ненадёжно).
* Сделать у клиентов хранение ID рейтов в отдельном JSONB (postgresql) поле для избежания дублирования информации в rates.

**Недостатки, ограничения, риски**

Недостатки, ограничения, риски:

* Риск перегрузки системы при массовом обновлении ставок.
* Дублирование ставок для разных клиентов.
* Возможные сбои при передаче через SFTP (базово настроить retry, а также необходимы мониторинг и алертинг).

